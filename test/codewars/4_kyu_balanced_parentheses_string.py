"""
https://www.codewars.com/kata/60790e04cc9178003077db43/python
"""
CATALAN_NUMBERS_0_200 = [1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670, 129644790, 477638700, 1767263190, 6564120420, 24466267020, 91482563640, 343059613650, 1289904147324, 4861946401452, 18367353072152, 69533550916004, 263747951750360, 1002242216651368, 3814986502092304, 14544636039226908, 55534064877048200, 212336130412243136, 812944042149730944, 3116285494907301888, 11959798385860456448, 45950804324621754368, 176733862787006758912, 680425371729976098816, 2622127042276493361152, 10113918591637903114240, 39044429911904466501632, 150853479205085437231104, 583300119592997010538496, 2257117854077249289977856, 8740328711533178684178432, 33868773757191069011804160, 131327898242169454951661568, 509552245179617454975877120, 1978261657756161795092905984, 7684785670514321284577361920, 29869166945772643291754397696, 116157871455782501690155991040, 451959718027953778629080514560, 1759414616608820049213877387264, 6852456927844878204927723175936, 26700952856774869664425314353152, 104088460289122375710728989442048, 405944995127577277881922015461376, 1583850964596121085691388992946176, 6182127958584859498423517435658240, 24139737743045639545144058868400128, 94295850558772028032067099196129280, 368479169875816822460585793260879872, 1440418573150920265734848303744417792, 5632681584560314822302202470705659904, 22033725021956526392329664246673571840, 86218923998960321897559507800804032512, 337485502510216092315720563448440946688, 1321422108420282798959819524998961299456, 5175569924646107515922497550707779960832, 20276890389709407809665386752755082723328, 79463489365077404932288633700958630576128, 311496878311103439713971836961560580849664, 1221395654430379266592777406068189227384832, 4790408930363305787391870162643243212210176, 18793142726809892268444270445664335843819520, 73745243611532485890383252201633110497951744, 289450081175265012319102429890007113280782336, 1136359577947336759046196121566882144848969728, 4462290049988322364360657935220454239609290752, 17526585015616784562287803516902589337832521728, 68854441132780217641319998193916535060794703872, 270557451039395201462275417582604127526851706880, 1063353702922274205394804434716444066497582596096, 4180080073556525806254375212798824584600679874560, 16435314834665430509426028705481346179120641343488, 64633260585762928561270022889603120932345507479552, 254224158304000828802582998007887026328975636955136, 1000134600800354773801821453586282758962175499304960, 3935312233584004761798579723751123973074570465771520, 15487357822491890651046536566638268664479126548119552, 60960876535340425285893629224559209769212687178268672, 239993345518077028600656816618841521754189770969317376, 944973797977428347967294063693659916444176393284091904, 3721443204405955453041384223803424919564357471179898880, 14657929356129581224925853329959809778067989517976993792, 57743358069601376128435709789374516817303279600398237696, 227508830794229414105930962711713398064023966397629464576, 896519947090131678185430741499021921911623568450622849024, 3533343320884637023965102013014952970470043487576747147264, 13927547459020995355533029121739020822118725094707518504960, 54906677482678931878085846018398067197176190467859307036672, 216489185503134089554106614722111104859072937946436014702592, 853702637172736214426970468482484282018374690475440861085696, 3366939372774717188983900212724426533445059859795025370021888, 13280705303722496768142905871824027763827155099326324834041856, 52391773216519938812485337197396286706620428262470394014859264, 206709359781542310477577199325691722141664606480561260439011328, 815663960219058901061919525176824431425666960298678271648727040, 3218959557293071961276423024576737522135435400869939844558618624, 12704920022590355092219637636373329355307837839202978614581657600, 50151000089172452311443697480238096229067483542992888686283063296, 197987426438993851348686442673335726557186507676249856418861023232, 781708976802234337264150862382556683279197168259176478853543493632, 3086748267372925336557729291929982121924821089733266775882181115904, 12190039767760875369808534698274218531950984851704944245476627054592, 48145535217206823743144851362860564560734595783981481266380959383552, 190174864107966963363519293295104594754570573036159248619324303212544, 751269297881059575070604904951884710248606802546929296001720760926208, 2968129521136645281795121388378209676146808538766188708075935572688896, 11727731278637475825174090238151584055236829467066142862935778647867392, 46343454246228735288630982167876775839378264669086601399200639096979456, 183149331181095948816067597677003055770973006868798477766933517684441088, 723875928001474480714886274340493233393356840560930037393002158901690368, 2861304849265670700176560318777461323310542533652672260643786447835365376, 11311095732253353720387694577222722614538474878191128220987907209798090752, 44718285453094652783602109866536167584038290632926224105683483279658844160, 176809220945312712774229206469247135604905981251569492990348387763621986304, 699138751524213671311202378807044831004437040104616556140065879486684463104, 2764775971936663236903632124889861831004244380586798555530186341862885818368, 10934377152170563728574756525946479314410225971733981338527737424862953603072, 43247909631719392172935035540992503438527812218330192211278221683480361697280, 171069509209912272371668638195865394751274142897517842662763593752033294811136, 676730852609800031880355418525328610170463472801225839539957106436190354014208, 2677285562879646605738143791328901674606722588104093027331864150579637617950720, 10592738531393383448662421761084782340690003766633838020258670350339731907149824, 41913713613427053212452852826978370304092594059093938103529248489773914323419136, 165858552441704198446226564380342349321297333566360961615561449570810309937987584, 656376399024616619608994134294852135523348072567744755282651498324871067172077568, 2597771382055173000894918689709681886281383288492950020542560637983513438811324416, 10282088127575019719819713123119952436251671534066329098890070113179723582742200320, 40699932171651121690115808925417296754632716584193955969148308341586482595492790272, 161115593562260295349300006699760111309052455259181828469514765045026805019832221696, 637841185472509886894723952575958077848440245332507372059074170925699098395174502400, 2525330407789120772283609662500627525413495650986722138578841505699205004894591254528, 9998943371381248165942988523212997195917161009879607525887712329415674619642828029952, 39593131470570041058257698948363379813283523401197055427184630771432435409526609412096, 156788800623457369768516688497705322992748849436846810040804468912074461590750566023168, 620925183926009979474947659763773125508288903115030317390500564900451379245483863048192, 2459190531075381906759158965537613752350116775739656687172759065628120759599535140896768, 9740323279945630851664767597897004927597717658551115765659601593466347517349123904765952, 38581800004979444654202452387731253679707094984350574977405720637301260454489367085318144, 152833710987466961222004856320082841845209008441964882470241097556729487671682401094860800, 605456624296503735344027397953274223207214150656506457976684709553182713460234007519166464, 2398688027467677396186147957947894597416070403852586815601301667209073404069003731388071936, 9503662691106114607016286331224555251695902387061223248110172003121278295417647720287961088, 37656021983627997995948797614771008820748339400962171739587907965936271374553396403599572992, 149211987110125941697096831681917011753555966724162893476648383234895712698362883224534777856, 591287253268697822082898528860935470211996237027435266287123355176126796325066580113907253248, 2343249485175950306609757399607608834994804507790462388795309225214935712869011980692716781568, 9286743358427385974341272493383545306823912105608553197585813951018191287604988739899881422848, 36807214530352444749402621674457794224083022395218020414636412851642043145627335394714787512320, 145890413956669688750233352966353346722993972301768498623599051193600080372616460926971285602304, 578288508334268958286344811985260785257631694729873877316616694570464631936559389390894822064128, 2292377200702311724395872010724531874968265002638007400332347106904596354682003241433336744247296, 9087638188498450236609648780962197825924704137295042774065105641482551740410830887844083845300224, 36027914711798585788902860005367210639548339496641569404545393909276741068962325873667355036352512, 142840085386777925248297941056095643143310361056220017536008834281132728139140738955839287456694272, 566348408726522931567732359001954501385929101319262789704805105306986561010223016097010363674918912, 2245637295066794308817863978041412384158420178077020190733214916892772226007155556255426710624796672, 8904665805871796900549236804692943499199738610247247926261691263746471944427768502308104147992313856, 35311605781905401301212260546982803091364973093375061779064619937049162408750212018921349013913468928, 140035739500813426322727083450401015015209453728920181986045318959584953044011976416166001212653568000, 555369012338453230267947052491117757266476868201753644380486982954747317624309665158420168435598098432, 2202649981138950057560736071762514312261768583476375462419545763130038730877433511546997192394289446912, 8736353295978082862863471472137610467717354418972450552114663051247563246785503613646353730651511848960, 34652574525946587146359326597001919705945288514896146289641941864604170130203347376661461159108730159104, 137455212286254804035589033852523203044004746642344827303243036125038194516268089732503345741692005253120, 545264322770889193623312429937926622236236837893787373165257168606549875642988356000956429780013337804800, 2163081544179021999489777491311215824504945396634334981207257454569987703970653522504584843907581035413504, 8581405470349562335863088547298529896910115699787514334618658533009940863629892364345998110009822879416320, 34045793442147719074046744083789470342247817247524902192014429006344438964023577651912901320798081023737856, 135078985873169860118014408961540195383841354650571208121776402756353230677911220154020965213385651763806208, 535958556851609478628328780178268393601828357665221840559042422451316377389902908012509812905639636543471616, 2126637696170557202669924406144912840451181567956889648487079237190048025160946967016739014902127988771389440, 8438679368846998727662802538179162644733476685140295895068690349618947309197845123551692794354109250845802496, 33486822892249997632946232629085787311640132550992637524129635422732590477198328764090884542202016990272421888, 132889812951349987883853153369659331857538634107947610199217071581518581569781055229898353196428618957785661440, 527384702707451774766213776228637023506767046672070366724122206065668118621231194460957460105523143947740774400, 2093058038870199308282629995768412023581351958934299033854394504538113009880100648155723605227096101419155980288, 8307162993650635140077872253995143581702954513210613122129039602405532669703061004252438306489807902797344014336, 32971729407788602565262546090247445248889933053895688189878975861357228915686785497978855992005725945524733870080, 130872402880145529524892248813317526558664132377139157860533620386109379404713207723602312774225635284402147688448, 519483313473230687024217135630433232357583536045244002121606490363336800398961277682052338088950515166544312401920, 2062111427086631490751202051335514292121094504291337920731124257426095989404512058256862251440233895072627460931584, 8185957483283294589718748495596409230787408563828117522658508292718085177784621770128218373932205291314125381566464, 32497017144692478119748494823414335536896886291495050204566594385648618513556822256845569656716680598254718793285632, 129013158064429140410142278223287313428882954779561569279425587839965949381622015026028030704516182127524937713319936, 512201493211017174390651129453116423326002819815022124790502975729766594956375994750712603146134683372740710697533440]


def balanced_parens(n, k):
    k += 1
    if k > CATALAN_NUMBERS_0_200[n] or k < 1:
        return
    depth = 0
    s = ""
    d = _helper_matrix(n)
    for i in range(2 * n):
        if d[2 * n - (i + 1)][depth + 1] >= k:
            s += '('
            depth += 1
        else:
            k -= d[2 * n - (i + 1)][depth + 1]
            s += ')'
            depth -= 1
    return s


def _helper_matrix(n):
    matrix = [[0] * (2 * n + 1) for _ in range(2 * n + 1)]
    matrix[0][0] = 1
    for i in range(1, 2 * n + 1):
        for j in range(2 * n):
            if j == 0:
                matrix[i][j] = matrix[i - 1][j + 1]
            else:
                matrix[i][j] = matrix[i - 1][j - 1] + matrix[i - 1][j + 1]
    return matrix


print(balanced_parens(3, 4))
